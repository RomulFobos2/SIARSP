<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Детали склада | СИАРСП</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/bootstrap-icons.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <script src="/js/bootstrap.bundle.min.js"></script>
</head>
<body class="admin-page">
<header th:insert="~{blocks/header :: header}"></header>
<div class="container my-5">
    <div class="profile-card mb-4">
        <div class="profile-actions">
            <a th:href="'/employee/warehouseWorker/reference/allWarehouses'" class="btn btn-secondary btn-profile">← Назад к складам</a>
        </div>
    </div>
    <div class="profile-card p-4">
        <div class="d-flex justify-content-between align-items-start mb-4">
            <div>
                <h2 class="h3 fw-bold mb-1" th:text="${warehouse.getName()}"></h2>
                <span class="badge"
                      th:classappend="${warehouse.getType().name() == 'REFRIGERATOR'} ? 'bg-info text-dark' : 'bg-secondary'"
                      th:text="${warehouse.getType().name() == 'REFRIGERATOR'} ? 'Холодильный' : 'Обычный'"></span>
            </div>
        </div>
        <div class="row g-4 mb-4">
            <div class="col-md-6">
                <h6 class="text-muted fw-semibold mb-2">Адрес</h6>
                <p th:text="${warehouse.getAddress() != null ? warehouse.getAddress() : 'Не указан'}"></p>
                <p th:if="${warehouse.getLatitude() != null and warehouse.getLongitude() != null}" class="text-muted mb-0">
                    <i class="bi bi-pin-map"></i>
                    Координаты: <span th:text="${warehouse.getLatitude()}"></span>, <span th:text="${warehouse.getLongitude()}"></span>
                </p>
            </div>
            <div class="col-md-6">
                <h6 class="text-muted fw-semibold mb-2">Заполненность</h6>
                <div class="d-flex justify-content-between mb-1">
                    <small class="fw-semibold text-muted">Загрузка</small>
                    <small class="fw-semibold"
                           th:classappend="${occupancyPercent >= 85} ? 'text-danger' : (${occupancyPercent >= 60} ? 'text-warning' : 'text-success')"
                           th:text="${#numbers.formatDecimal(occupancyPercent, 1, 1)} + '%'"></small>
                </div>
                <div class="progress" style="height: 10px;">
                    <div class="progress-bar"
                         th:classappend="${occupancyPercent >= 85} ? 'bg-danger' : (${occupancyPercent >= 60} ? 'bg-warning' : 'bg-success')"
                         role="progressbar"
                         th:style="'width: ' + ${#numbers.formatDecimal(occupancyPercent, 1, 0)} + '%'"
                         aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <p class="text-muted small mt-2">
                    Использовано: <span th:text="${#numbers.formatDecimal(usedVolume, 1, 1)}"></span> л
                    из <span th:text="${#numbers.formatDecimal(totalCapacity, 1, 1)}"></span> л
                </p>
            </div>
        </div>
        <div class="mb-4">
            <h6 class="text-muted fw-semibold mb-2">Структура склада</h6>
            <div class="d-flex gap-3 text-muted">
                <span><i class="bi bi-grid-3x3"></i> <strong th:text="${warehouse.getShelves().size()}"></strong> стеллажей</span>
            </div>
        </div>
    </div>
</div>
<div th:insert="~{blocks/footer :: footer}"></div>
</body>
</html>
